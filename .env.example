# ============================================
# qwq AIOps Platform - 环境变量配置示例
# ============================================
# 复制此文件为 .env 并修改相应的值

# ============================================
# 基础配置
# ============================================

# 服务端口
PORT=8080

# 运行环境 (development, production)
ENVIRONMENT=production

# 日志级别 (debug, info, warn, error)
LOG_LEVEL=info

# 时区
TZ=Asia/Shanghai

# ============================================
# 数据库配置
# ============================================

# 数据库类型 (sqlite, mysql, postgresql)
DB_TYPE=sqlite

# SQLite 配置
DB_PATH=./data/qwq.db

# MySQL/PostgreSQL 配置（如果使用）
# DB_HOST=localhost
# DB_PORT=3306
# DB_USER=qwq
# DB_PASSWORD=your-password-here
# DB_NAME=qwq
# DB_TIMEOUT=30s

# ============================================
# AI 配置
# ============================================

# AI 提供商 (openai, ollama)
AI_PROVIDER=openai

# OpenAI 配置
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo

# Ollama 配置（如果使用本地模型）
# OLLAMA_HOST=http://localhost:11434
# OLLAMA_MODEL=deepseek-r1:7b

# AI 请求超时（秒）
AI_TIMEOUT=60

# ============================================
# 安全配置
# ============================================

# JWT 密钥（请修改为随机字符串，至少 32 位）
JWT_SECRET=change-this-to-a-random-secret-key-at-least-32-characters

# 加密密钥（必须是 32 字节，用于 AES-256 加密）
ENCRYPTION_KEY=change-this-to-32-byte-key-here

# JWT Token 过期时间（小时）
JWT_EXPIRY=24

# 密码最小长度
PASSWORD_MIN_LENGTH=8

# ============================================
# 功能开关
# ============================================

# 启用 API 缓存
ENABLE_CACHE=true

# 缓存过期时间（秒）
CACHE_TTL=300

# 启用 Prometheus 指标
ENABLE_METRICS=true

# Prometheus 端口
PROMETHEUS_PORT=9090

# 启用调试模式
DEBUG=false

# ============================================
# Docker 配置
# ============================================

# Docker 守护进程地址
DOCKER_HOST=unix:///var/run/docker.sock

# Docker API 版本
DOCKER_API_VERSION=1.41

# ============================================
# 备份配置
# ============================================

# 启用自动备份
BACKUP_ENABLED=true

# 备份调度（Cron 表达式）
BACKUP_SCHEDULE=0 2 * * *

# 备份保留天数
BACKUP_RETENTION=30

# 备份存储类型 (local, s3, ftp, sftp)
BACKUP_STORAGE_TYPE=local

# 备份存储路径
BACKUP_PATH=./backups

# S3 配置（如果使用）
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_BUCKET=qwq-backups
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key
# S3_REGION=us-east-1

# ============================================
# 监控告警配置
# ============================================

# 告警评估间隔（秒）
ALERT_EVALUATION_INTERVAL=30

# 告警冷却期（秒）
ALERT_COOLDOWN=600

# 指标保留时间（小时）
METRICS_RETENTION=168

# ============================================
# 集群配置
# ============================================

# 启用集群模式
CLUSTER_ENABLED=false

# 节点名称
NODE_NAME=qwq-node-1

# 集群节点列表（逗号分隔）
# CLUSTER_NODES=qwq-node-1,qwq-node-2,qwq-node-3

# 健康检查间隔（秒）
HEALTH_CHECK_INTERVAL=30

# ============================================
# 通知配置
# ============================================

# 钉钉 Webhook
# DINGTALK_WEBHOOK=https://oapi.dingtalk.com/robot/send?access_token=xxx

# 企业微信 Webhook
# WECHAT_WEBHOOK=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx

# Slack Webhook
# SLACK_WEBHOOK=https://hooks.slack.com/services/xxx

# 邮件配置
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-password
# SMTP_FROM=qwq@example.com

# ============================================
# 限流配置
# ============================================

# API 限流（每分钟请求数）
RATE_LIMIT=100

# 登录失败限制（次数/时间窗口分钟）
LOGIN_FAIL_LIMIT=5
LOGIN_FAIL_WINDOW=15

# ============================================
# CORS 配置
# ============================================

# 允许的源（逗号分隔，* 表示允许所有）
CORS_ALLOWED_ORIGINS=*

# 允许的方法
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS

# 允许的头
CORS_ALLOWED_HEADERS=Origin,Content-Type,Authorization

# ============================================
# 其他配置
# ============================================

# 最大上传文件大小（MB）
MAX_UPLOAD_SIZE=100

# 会话超时时间（分钟）
SESSION_TIMEOUT=30

# 并发工作线程数
WORKER_THREADS=4

# 请求超时时间（秒）
REQUEST_TIMEOUT=30

# ============================================
# 开发配置（仅开发环境）
# ============================================

# 启用热重载
# HOT_RELOAD=true

# 启用 pprof 性能分析
# ENABLE_PPROF=true

# pprof 端口
# PPROF_PORT=6060

# ============================================
# 注意事项
# ============================================
# 1. 请务必修改所有包含 "change-this" 的值
# 2. 生产环境请使用强密码
# 3. 不要将 .env 文件提交到 Git
# 4. 定期轮换密钥和密码
# 5. 使用环境变量管理工具（如 Vault）管理敏感信息
