# qwq AIOps 平台用户手册

## 目录

- [快速入门](#快速入门)
- [系统概览](#系统概览)
- [应用商店](#应用商店)
- [容器管理](#容器管理)
- [网站管理](#网站管理)
- [数据库管理](#数据库管理)
- [监控告警](#监控告警)
- [用户权限](#用户权限)
- [AI 智能助手](#ai-智能助手)
- [常见问题](#常见问题)

## 快速入门

### 首次登录

1. 打开浏览器访问 `http://your-server:8899`
2. 使用默认账号登录：
   - 用户名：`admin`
   - 密码：`admin123`
3. 首次登录后请立即修改密码

### 界面布局

- **左侧导航栏**：主要功能模块入口
- **顶部工具栏**：语言切换、刷新、用户信息
- **主内容区**：当前模块的详细内容

### 语言切换

点击顶部工具栏的语言按钮，可在中文和英文之间切换。

## 系统概览

系统概览页面展示服务器的实时运行状态：

### 系统指标

- **CPU 负载**：当前 CPU 使用情况和负载平均值
- **内存使用**：内存使用率和可用内存
- **系统磁盘**：磁盘使用率和剩余空间
- **TCP 连接**：当前活跃的 TCP 连接数

### 应用服务监控

实时监控所有部署的应用服务状态：

- **服务名称**：应用服务的名称
- **监控地址**：健康检查的 URL
- **响应时间**：服务响应延迟
- **状态**：运行中/异常

## 应用商店

应用商店提供一键部署常用应用的功能。

### 浏览应用

1. 进入"应用商店"页面
2. 使用搜索框查找应用
3. 使用分类筛选器过滤应用
4. 点击应用卡片查看详情

### 安装应用

1. 找到需要的应用，点击"安装"按钮
2. 输入应用实例名称（只能包含字母、数字、下划线和连字符）
3. 配置应用参数（如端口、密码等）
4. 点击"确认"开始安装
5. 等待安装完成，查看安装状态

### 管理已安装应用

- **查看状态**：应用卡片显示"已安装"标签
- **卸载应用**：点击"卸载"按钮，确认后删除应用
- **更新应用**：点击"更新"按钮升级到最新版本

### 预置应用模板

系统预置了以下常用应用：

#### 数据库
- MySQL 8.0
- PostgreSQL 15
- Redis 7
- MongoDB 6

#### Web 服务器
- Nginx
- Apache
- Caddy

#### 开发工具
- GitLab
- Jenkins
- SonarQube

#### 监控工具
- Prometheus
- Grafana
- Jaeger

#### 消息队列
- RabbitMQ
- Kafka

## 容器管理

容器管理模块提供 Docker 容器的可视化管理。

### 查看容器列表

容器列表显示所有容器的信息：

- **名称**：容器名称
- **镜像**：使用的 Docker 镜像
- **状态**：详细的运行状态信息
- **运行状态**：运行中/已停止

### 容器操作

- **启动**：启动已停止的容器
- **停止**：停止正在运行的容器
- **重启**：重启容器
- **删除**：删除容器（需先停止）

### 容器编排

支持 Docker Compose 编排：

1. 创建或导入 Compose 文件
2. 配置服务参数
3. 一键部署整个应用栈
4. 管理服务生命周期

## 网站管理

网站管理模块提供反向代理和 SSL 证书管理功能。

### 创建网站

1. 点击"创建网站"按钮
2. 填写网站信息：
   - **域名**：网站域名（如 example.com）
   - **后端地址**：应用服务地址（如 http://localhost:3000）
   - **启用 SSL**：是否启用 HTTPS
   - **负载均衡策略**：轮询/最少连接/IP哈希
3. 点击"创建"完成配置

### SSL 证书管理

#### 申请 Let's Encrypt 证书

1. 选择网站，点击"SSL管理"
2. 点击"申请 Let's Encrypt 证书"
3. 系统自动完成域名验证和证书申请
4. 证书自动部署到 Nginx

#### 证书续期

- 系统会自动检测证书有效期
- 到期前 30 天自动续期
- 也可手动点击"续期证书"

### 反向代理配置

系统自动生成 Nginx 配置文件，支持：

- HTTP/HTTPS 代理
- WebSocket 代理
- 负载均衡
- 缓存配置
- 访问控制

### AI 优化建议

系统会自动分析网站配置，提供优化建议：

- 性能优化建议
- 安全加固建议
- 配置问题检测
- 自动修复常见问题

## 数据库管理

数据库管理模块提供多种数据库的统一管理界面。

### 创建数据库连接

1. 点击"+"按钮创建连接
2. 填写连接信息：
   - **连接名称**：自定义名称
   - **数据库类型**：MySQL/PostgreSQL/Redis/MongoDB
   - **主机**：数据库服务器地址
   - **端口**：数据库端口
   - **用户名**：数据库用户名
   - **密码**：数据库密码
   - **数据库名**：要连接的数据库
3. 点击"创建"保存连接

### SQL 编辑器

#### 执行查询

1. 选择数据库连接
2. 在编辑器中输入 SQL 语句
3. 按 `Ctrl+Enter` 或点击"执行"按钮
4. 查看查询结果

#### 编辑器功能

- **语法高亮**：SQL 语法自动高亮
- **自动补全**：智能代码补全
- **快捷键**：`Ctrl+Enter` 执行查询
- **多标签**：支持多个查询标签

### AI 查询优化

系统会自动分析 SQL 查询，提供优化建议：

- **性能分析**：识别慢查询
- **索引建议**：推荐创建索引
- **查询重写**：优化查询语句
- **执行计划**：分析查询执行计划

### 数据库备份

1. 选择数据库连接
2. 配置备份策略：
   - 备份频率（每日/每周/每月）
   - 保留份数
   - 存储位置
3. 启用自动备份

## 监控告警

监控告警模块提供系统和应用的全方位监控。

### 监控指标

#### 系统指标

实时展示系统资源使用情况：

- CPU 使用率
- 内存使用率
- 磁盘使用率
- 网络流量

#### 图表展示

- 实时折线图
- 历史趋势分析
- 多维度对比

### 告警规则

#### 创建告警规则

1. 切换到"告警规则"标签
2. 点击"创建规则"
3. 配置规则参数：
   - **规则名称**：自定义名称
   - **监控指标**：选择要监控的指标
   - **条件**：大于/小于/等于
   - **阈值**：触发告警的值
   - **持续时间**：持续多久触发告警
   - **告警级别**：严重/警告/信息
4. 点击"创建"保存规则

#### 管理规则

- **启用/禁用**：控制规则是否生效
- **编辑**：修改规则参数
- **删除**：删除不需要的规则

### 告警历史

查看所有触发的告警记录：

- 告警级别
- 规则名称
- 告警信息
- 触发时间
- 状态（触发中/已解决）

### AI 预测分析

#### 容量预测

系统使用 AI 分析历史数据，预测未来资源使用趋势：

- CPU 使用趋势
- 内存使用趋势
- 磁盘空间预测
- 容量规划建议

#### 运行分析

1. 切换到"AI预测分析"标签
2. 点击"运行分析"
3. 查看分析结果：
   - 风险等级
   - 预测摘要
   - 详细指标
   - 优化建议

## 用户权限

用户权限模块提供完整的 RBAC 权限管理。

### 用户管理

#### 创建用户

1. 切换到"用户管理"标签
2. 点击"创建用户"
3. 填写用户信息：
   - 用户名
   - 邮箱
   - 密码
   - 角色
   - 启用状态
4. 点击"保存"

#### 管理用户

- **编辑**：修改用户信息
- **权限**：配置用户权限
- **禁用**：禁用用户账号
- **删除**：删除用户

### 角色管理

#### 创建角色

1. 切换到"角色管理"标签
2. 点击"创建角色"
3. 填写角色信息：
   - 角色名称
   - 描述
   - 权限列表
4. 点击"保存"

#### 预置角色

- **管理员**：拥有所有权限
- **运维人员**：容器、网站、数据库管理权限
- **开发人员**：应用部署、日志查看权限
- **只读用户**：只能查看，不能修改

### 权限列表

查看系统所有可用权限：

- 资源类型（容器、网站、数据库等）
- 操作类型（查看、创建、编辑、删除）
- 权限描述

## AI 智能助手

AI 智能助手是 qwq 的核心功能，提供自然语言运维能力。

### 使用方法

1. 进入"AI 终端"页面
2. 在输入框中输入自然语言指令
3. 按回车发送
4. AI 助手会理解指令并执行操作

### 支持的指令类型

#### 系统查询

```
看看内存使用情况
检查磁盘空间
查看 CPU 负载
显示网络连接
```

#### 容器操作

```
列出所有容器
启动 nginx 容器
停止 mysql 容器
重启 redis 容器
```

#### 配置生成

```
生成 Nginx 配置
创建 MySQL 数据库
配置反向代理
生成 SSL 证书
```

#### 故障诊断

```
为什么服务器这么慢
检查系统问题
分析日志错误
诊断网络问题
```

### AI 功能特点

- **自然语言理解**：支持中文和英文指令
- **上下文记忆**：记住对话历史
- **智能推荐**：主动提供优化建议
- **安全执行**：危险操作需要确认

## 常见问题

### 登录问题

**Q: 忘记密码怎么办？**

A: 联系管理员重置密码，或使用以下命令重置：

```bash
docker exec qwq ./qwq reset-password admin
```

**Q: 无法登录系统？**

A: 检查以下几点：
1. 确认服务正常运行
2. 检查浏览器控制台错误
3. 清除浏览器缓存
4. 尝试使用无痕模式

### 应用安装问题

**Q: 应用安装失败？**

A: 可能的原因：
1. 端口已被占用
2. 磁盘空间不足
3. Docker 镜像拉取失败
4. 网络连接问题

解决方法：
- 查看安装日志
- 检查系统资源
- 配置 Docker 镜像加速

**Q: 应用无法访问？**

A: 检查：
1. 容器是否正常运行
2. 端口映射是否正确
3. 防火墙规则
4. 网络连接

### 性能问题

**Q: 系统响应慢？**

A: 优化建议：
1. 增加服务器资源
2. 清理历史数据
3. 优化数据库
4. 启用缓存

**Q: 数据库查询慢？**

A: 使用 AI 查询优化功能：
1. 执行查询
2. 查看 AI 优化建议
3. 创建推荐的索引
4. 重写查询语句

### 备份恢复

**Q: 如何备份数据？**

A: 两种方式：
1. 使用系统备份功能（推荐）
2. 手动备份数据目录

**Q: 如何恢复数据？**

A: 参考部署指南的备份恢复章节。

### 监控告警

**Q: 告警太多怎么办？**

A: 系统提供智能降噪功能：
1. 调整告警阈值
2. 增加持续时间
3. 启用告警聚合
4. 配置告警静默期

**Q: 没有收到告警？**

A: 检查：
1. 告警规则是否启用
2. 通知渠道配置
3. 告警条件是否满足

## 技术支持

如需帮助，请通过以下方式联系我们：

- 📧 邮箱：support@qwq.io
- 💬 社区：https://community.qwq.io
- 📖 文档：https://docs.qwq.io
- 🐛 问题反馈：https://github.com/your-org/qwq/issues

## 更新日志

查看最新功能和改进：https://github.com/your-org/qwq/releases
